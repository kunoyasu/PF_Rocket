<!DOCTYPE html>
<html lang="ja">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="style.css" />
    <title>アポロ18Go!</title>
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <!-- JavaScript Bundle with Popper -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
      crossorigin="anonymous"
    ></script>
  </head>

  <body>
    <!-- ボタン -->
    <div class="container">
      <div id="target">5.000</div>
      <div id="result" class="standby">0.000</div>
      <div id="buttons">
        <div id="start">Start</div>
        <div id="stop">Stop</div>
      </div>
    </div>
    <div class="content">
      <figure>
        <img class="img-fluid" src="./images/rocket.png" alt="ロケット" width="200" height="200" />
      </figure>
    </div>

    <!-- Start用Modalはじまり -->
    <div
      class="modal fade modal-dialog modal-fullscreen-sm-down"
      id="startModal"
      tabindex="-1"
      aria-labelledby="startModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="startModalLabel">はじめますか？</h5>
          </div>
          <div class="modal-body" id="startmodalBody">
            <p></p>
            <a href="" target="_blank" rel="noopener noreferrer">ツイートする</a>
          </div>
          <div class="modal-footer">
            <button id="start2" type="button" class="btn btn-secondary">はじめる</button>
          </div>
        </div>
      </div>
    </div>
  </body>
  <!-- Start用Modal終わり -->
  <script>
    // 開始時のモーダル
    const startDialog = document.getElementById('startModal')
    const startButton = document.getElementById('start2')
    window.onload = () => {
      startDialog.tabIndex = '-1'
      startDialog.ariaModal = 'true'
      startDialog.role = 'dialog'
      startDialog.style = 'display: block;'
      startDialog.classList.add('show')
    }
    ;(function () {
      'use strict'

      var start = document.getElementById('start')
      var stop = document.getElementById('stop')
      var result = document.getElementById('result')
      var startTime
      var isStarted = false

      start.addEventListener('click', function () {
        if (isStarted === true) {
          return
        }
        isStarted = true
        startTime = Date.now()
        this.className = 'pushed'
        stop.className = ''
        result.textContent = '0.000'
        result.className = 'stanby'
      })

      stop.addEventListener('click', function () {
        var elapsedTime
        var diff
        if (isStarted === false) {
          return
        }
        isStarted = false
        elapsedTime = (Date.now() - startTime) / 1000
        result.textContent = elapsedTime.toFixed(3)
        this.className = 'pushed'
        start.className = ''
        result.className = ''
        diff = elapsedTime - 5.0
        if (diff > -1.0 && diff < 1.0) {
          result.className = 'perfect'
        }
      })
    })()
  </script>
</html>
